var I=(b,f,e)=>new Promise((v,a)=>{var m=o=>{try{r(e.next(o))}catch(y){a(y)}},n=o=>{try{r(e.throw(o))}catch(y){a(y)}},r=o=>o.done?v(o.value):Promise.resolve(o.value).then(m,n);r((e=e.apply(b,f)).next())});import{_ as S,u as j,g as x,i as P,c as N,q as V,t as q,o as u,a as _,F as R,x as T,w as k,z as A,A as C,d as F,f as M,D as B,e as s,B as E,v as G,C as W,G as D,k as O,l as U,a2 as H,n as J,s as K,au as Q,E as X,av as Y}from"./bundle.0.0.2.js?v=0.47032999880692716";import{N as Z}from"./chunk.5jn23.js";const ee=["onClick"],te={key:0},se={key:0,class:"tab_item item tab_list"},ae=["onClick"],ne={key:0},oe={__name:"index",props:{data:Array,tIndex:Number|String,width:{type:Number,default:100}},emits:["tabChange"],setup(b,{expose:f,emit:e}){j(d=>({"675a1e9d":$.value}));const v=e,a=b,m=x(7),n=x(null),r=x(!1),o=P("resize"),y=()=>{if(!n.value)return;const d=parseInt(window.getComputedStyle(n.value).width);let l=Math.floor(d/a.width);o.smallRef.value||(l=l-1),m.value=a.data.length>l?l-1:l};o.change(y);const $=N(()=>a.width+"px"),t=N(()=>({tabs:a.data.slice(0,m.value),list:a.data.slice(m.value)})),g=()=>{r.value=!1},p=d=>{v("tabChange",d),r.value=!1};return f({bodyClick:g}),V(()=>{y(),document.addEventListener("click",g)}),q(()=>{document.removeEventListener("click",g)}),(d,l)=>(u(),_("div",{class:"tabs_wrapper",ref_key:"wrapper",ref:n},[(u(!0),_(R,null,T(t.value.tabs,i=>(u(),_("div",{class:k(["tab_item item",{active:a.tIndex==i.id}]),key:i,onClick:z=>p(i)},[A(C(i.label)+" ",1),i.count?(u(),_("span",te," ("+C(i.count)+")",1)):F("",!0)],10,ee))),128)),t.value.tabs.length>5?(u(),_("div",se,[M(G(Z),{placement:"bottom",show:r.value,style:{padding:"4px","border-radius":"0px","background-color":"var(--tp_userList_bgcolor)"}},{trigger:B(()=>[s("div",{class:"text",onMouseover:l[0]||(l[0]=i=>r.value=!0),onClick:l[1]||(l[1]=E(i=>r.value=!0,["stop"]))},l[2]||(l[2]=[s("span",{class:"iconfont icon-option-horizontal"},null,-1)]),32)]),default:B(()=>[s("div",{class:k(["list_wrapper",{small:G(o).smallRef.value}])},[(u(!0),_(R,null,T(t.value.list,(i,z)=>(u(),_("div",{class:k(["tab_li item",{active:a.tIndex==i.id}]),key:z,onClick:w=>p(i)},[A(C(i.label)+" ",1),i.count?(u(),_("span",ne," ("+C(i.count)+")",1)):F("",!0)],10,ae))),128))],2)]),_:1},8,["show"])])):F("",!0)],512))}},le=S(oe,[["__scopeId","data-v-cff83296"]]);const ie={class:"FriendCard"},re={class:"avater"},de=["src"],ce={class:"name"},ue={class:"desc"},_e={class:"tag"},ve={key:0,class:"badge"},pe={key:1,class:"badge"},fe={__name:"FriendCard",props:["data"],emits:["collect"],setup(b,{emit:f}){const e=b,v=f,a=()=>v("collect",e.data);return(m,n)=>(u(),_("div",ie,[s("div",re,[s("img",{src:e.data.avatar,alt:""},null,8,de)]),s("div",ce,C(e.data.name),1),s("div",{class:"collect",onClick:E(a,["stop"]),style:W({cursor:e.data.followed?"auto":"pointer"})},[s("span",{class:k(["iconfont",e.data.followed?"icon-heart-filled":"icon-heart"])},null,2)],4),s("div",ue,C(e.data.intro),1),s("div",_e,[n[0]||(n[0]=s("span",{class:"symbol"},"#",-1)),A(C(e.data.tag),1)]),e.data.friendType==2?(u(),_("div",ve,n[1]||(n[1]=[s("div",{class:"text"},"GPTs",-1)]))):F("",!0),e.data.friendType==3?(u(),_("div",pe,n[2]||(n[2]=[s("div",{class:"text"},"百炼应用",-1)]))):F("",!0)]))}},me=S(fe,[["__scopeId","data-v-5a8a319d"]]);const we=["onClick"],ge=150,xe=180,ye={__name:"FriendList",props:["data"],emits:["followed","itemClick"],setup(b,{expose:f,emit:e}){const v=P("resize"),a=b,m=e,n=x({width:"150px"}),r=x(null),o=()=>{if(!r.value)return;const t=parseInt(window.getComputedStyle(r.value).width);if(v.smallRef.value)return n.value.width=(t-20)/2+"px";const g=Math.floor(t/ge),p=Math.floor(t/xe);let d=Math.max(g,p);d=d>5?5:d;const l=(t-5*2*d)/d;n.value.width=l+"px"};v.change(()=>{D(()=>o())});const y=t=>m("followed",t),$=t=>m("itemClick",t);return V(()=>{o()}),f({computedW:o}),(t,g)=>(u(),_("div",{class:"FriendList",ref_key:"wrapper",ref:r},[(u(!0),_(R,null,T(a.data,p=>(u(),_("div",{class:"item",key:p,style:W(n.value),onClick:d=>$(p)},[M(me,{data:p,onCollect:d=>y(p)},null,8,["data","onCollect"])],12,we))),128))],512))}},be=S(ye,[["__scopeId","data-v-6599ab79"]]);const Ce={class:"content"},he={class:"rows"},ke={class:"lists"},$e={__name:"index",setup(b){const f=x([]),e=x(!1),v=x(null),a=x(null),m=O(),n=U(),r=P("resize"),o=H(),$=J().appContext.config.globalProperties.$bus;let t=!1;const g=x({tag:""}),p=w=>I(this,null,function*(){f.value=yield Q(g.value),a.value&&D(()=>{a.value.computedW()}),e.value=!0}),d=()=>{v.value&&v.value.bodyClick()},l=N(()=>{let w=0;const c=o.tags.map(({count:h,name:L})=>(w+=h,{label:L,count:h,id:L}));return[{label:"全部",count:w,id:""},...c]}),i=w=>I(this,null,function*(){if(t)return;t=!0,e.value=!1;const c=l.value.find(h=>h.id==w.id);c&&(g.value.tag=c.id,yield X(200),yield p()),t=!1}),z=w=>I(this,null,function*(){if(t||w.followed)return;t=!0;const c=yield Y({friendId:w.id});if(c.err){t=!1,c.errMsg&&m.error(c.errMsg);return}const h=f.value.find(L=>L.id===w.id);h.followed=1,n.addFriends(c),$.emit("friendFollow",c),t=!1});return V(()=>I(this,null,function*(){yield p(),setTimeout(()=>K("AI_Plaza"),300)})),(w,c)=>(u(),_("div",{class:k(["FriendsPlaza",{small:G(r).smallRef.value}]),onClick:d},[s("div",Ce,[c[0]||(c[0]=s("div",{class:"title"},"AI广场",-1)),c[1]||(c[1]=s("div",{class:"desc"},"精选高质量AI，使交流变得无限可能",-1)),s("div",he,[M(le,{ref_key:"tabsRef",ref:v,data:l.value,tIndex:g.value.tag,onTabChange:i},null,8,["data","tIndex"])]),s("div",ke,[s("div",{class:k(["list_wrapper",{show:e.value}])},[M(be,{ref_key:"friendRef",ref:a,data:f.value,onFollowed:z},null,8,["data"])],2)])])],2))}},Le=S($e,[["__scopeId","data-v-9899cdf2"]]);export{Le as default};
